import{r as e,i as A,j as r}from"./index-CQCPCHD6.js";const q=({images:n,autoPlay:j=!1,interval:v=3e3})=>{const[l,y]=e.useState(0),[k,h]=e.useState(!0),[g,C]=e.useState(null),[s,S]=e.useState(!1),b=e.useRef(new Set([0])),o=e.useRef(null),f=e.useRef(0),u=e.useRef(null),[i,N]=e.useState(null),[m,x]=e.useState(null),$=e.useRef(null),E=50,I=A.language;e.useEffect(()=>{f.current=l},[l]),e.useEffect(()=>()=>{o.current&&window.clearInterval(o.current),u.current&&window.clearTimeout(u.current)},[]);const R=e.useCallback(t=>{[t,(t+1)%n.length,(t-1+n.length)%n.length].forEach(c=>{if(!b.current.has(c)){const T=new Image;T.src=n[c].src,T.onload=()=>{b.current.add(c)},T.onerror=()=>{console.error(`Failed to preload image: ${n[c].src}`)}}})},[n]);e.useEffect(()=>{R(l)},[l,R]),e.useEffect(()=>{if(j)return o.current=window.setInterval(()=>{y(t=>(t+1)%n.length)},v),()=>{o.current&&(window.clearInterval(o.current),o.current=null)}},[j,v,n.length]);const d=e.useCallback((t,a)=>{t===f.current||s||(S(!0),C(a),y(t),h(!0),u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(()=>{S(!1),C(null)},500))},[s]),w=e.useCallback(()=>{const t=(f.current+1)%n.length;d(t,"left")},[d,n.length]),p=e.useCallback(()=>{const t=(f.current-1+n.length)%n.length;d(t,"right")},[d,n.length]),L=e.useCallback(()=>{h(!1)},[]),z=e.useCallback(()=>{console.error("Failed to load current image"),h(!1)},[]),D=e.useCallback(t=>b.current.has(t),[]),P=e.useCallback(()=>g?g==="left"?"slide-in-left":"slide-in-right":"",[g]),F=e.useCallback(t=>{s||(x(null),N(t.targetTouches[0].clientX))},[s]),M=e.useCallback(t=>{i&&x(t.targetTouches[0].clientX)},[i]),X=e.useCallback(()=>{if(!i||!m||s)return;const t=i-m,a=t>E,c=t<-E;a?w():c&&p(),N(null),x(null)},[i,m,s,w,p]);return r.jsxs("div",{className:"carousel relative w-full max-w-4xl mx-auto overflow-hidden rounded-lg",ref:$,onTouchStart:F,onTouchMove:M,onTouchEnd:X,children:[k&&r.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center z-10",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:D(l)?"Almost ready...":"Loading image..."})]})}),r.jsx("div",{className:`relative w-full h-100 md:h-120 ${P()}`,children:r.jsx("img",{src:n[l].src,alt:n[l].alt,className:`w-full h-full object-cover transition-all duration-500 ${k?"opacity-0":"opacity-100"}`,onLoad:L,onError:z,loading:"lazy",decoding:"async"},l)}),r.jsx("button",{onClick:w,disabled:s,className:`hidden sm:block absolute top-1/2 transform -translate-y-1/2 
                        ${I==="fa"?"translate-x-1/2 left-0":"-translate-x-1/2 right-0"}
                        bg-custom-gold/50 text-white rounded-full hover:bg-custom-gold/90 
                        transition-all disabled:opacity-50 disabled:cursor-not-allowed z-20
                        w-12 h-12 flex items-center justify-center cursor-pointer`,children:r.jsx("span",{className:"text-2xl leading-none pb-1",children:"›"})}),r.jsx("button",{onClick:p,disabled:s,className:`hidden sm:block absolute top-1/2 transform -translate-y-1/2
                        ${I==="fa"?"-translate-x-1/2 right-0":"translate-x-1/2 left-0"}
                        bg-custom-gold/50 text-white rounded-full hover:bg-custom-gold/90 
                        transition-all disabled:opacity-50 disabled:cursor-not-allowed z-20
                        w-12 h-12 flex items-center justify-center cursor-pointer`,children:r.jsx("span",{className:"text-2xl leading-none pb-1",children:"‹"})}),r.jsx("div",{className:"flex justify-center mt-4 space-x-1 sm:space-x-3 mb-1",children:n.map((t,a)=>r.jsx("button",{onClick:()=>d(a,a>l?"left":"right"),disabled:s,className:`cursor-pointer relative transition-all duration-300 w-2 h-2 sm:w-3.5 sm:h-3.5 rounded-full 
                            ${a===l?"scale-125 bg-custom-gold":"bg-gray-300 hover:bg-gray-400"} ${s?"opacity-50":"opacity-100"}`},a))})]})};export{q as default};
