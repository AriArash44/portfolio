import{r as e,i as X,j as l}from"./index-CXXpTehU.js";const q=({images:n,autoPlay:T=!1,interval:v=3e3})=>{const[s,j]=e.useState(0),[y,h]=e.useState(!0),[g,S]=e.useState(null),[r,k]=e.useState(!1),C=e.useRef(new Set([0])),a=e.useRef(null),f=e.useRef(0),u=e.useRef(null),[i,E]=e.useState(null),[b,m]=e.useState(null),$=e.useRef(null),I=50,N=X.language;e.useEffect(()=>{f.current=s},[s]),e.useEffect(()=>()=>{a.current&&window.clearInterval(a.current),u.current&&window.clearTimeout(u.current)},[]);const R=e.useCallback(t=>{[t,(t+1)%n.length,(t-1+n.length)%n.length].forEach(c=>{if(!C.current.has(c)){const p=new Image;p.src=n[c].src,p.onload=()=>{C.current.add(c)},p.onerror=()=>{console.error(`Failed to preload image: ${n[c].src}`)}}})},[n]);e.useEffect(()=>{R(s)},[s,R]),e.useEffect(()=>{if(T)return a.current=window.setInterval(()=>{j(t=>(t+1)%n.length)},v),()=>{a.current&&(window.clearInterval(a.current),a.current=null)}},[T,v,n.length]);const d=e.useCallback((t,o)=>{t===f.current||r||(k(!0),S(o),j(t),h(!0),u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(()=>{k(!1),S(null)},500))},[r]),x=e.useCallback(()=>{const t=(f.current+1)%n.length;d(t,"left")},[d,n.length]),w=e.useCallback(()=>{const t=(f.current-1+n.length)%n.length;d(t,"right")},[d,n.length]),L=e.useCallback(()=>{h(!1)},[]),z=e.useCallback(()=>{console.error("Failed to load current image"),h(!1)},[]),D=e.useCallback(()=>g?g==="left"?"slide-in-left":"slide-in-right":"",[g]),F=e.useCallback(t=>{r||(m(null),E(t.targetTouches[0].clientX))},[r]),M=e.useCallback(t=>{i&&m(t.targetTouches[0].clientX)},[i]),P=e.useCallback(()=>{if(!i||!b||r)return;const t=i-b,o=t>I,c=t<-I;o?x():c&&w(),E(null),m(null)},[i,b,r,x,w]);return l.jsxs("div",{className:"carousel relative w-full max-w-4xl mx-auto overflow-hidden rounded-lg",ref:$,onTouchStart:F,onTouchMove:M,onTouchEnd:P,children:[y&&l.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center z-10",children:l.jsx("div",{className:"loader"})}),l.jsx("div",{className:`relative w-full h-100 md:h-120 ${D()}`,children:l.jsx("img",{src:n[s].src,alt:n[s].alt,className:`w-full h-full object-cover transition-all duration-500 ${y?"opacity-0":"opacity-100"}`,onLoad:L,onError:z,loading:"lazy",decoding:"async"},s)}),l.jsx("button",{onClick:x,disabled:r,className:`hidden sm:block absolute top-1/2 transform -translate-y-1/2 
                        ${N==="fa"?"translate-x-1/2 left-0":"-translate-x-1/2 right-0"}
                        bg-custom-gold/50 text-white rounded-full hover:bg-custom-gold/90 
                        transition-all disabled:opacity-50 disabled:cursor-not-allowed z-20
                        w-12 h-12 flex items-center justify-center cursor-pointer`,children:l.jsx("span",{className:"text-2xl leading-none pb-1",children:"›"})}),l.jsx("button",{onClick:w,disabled:r,className:`hidden sm:block absolute top-1/2 transform -translate-y-1/2
                        ${N==="fa"?"-translate-x-1/2 right-0":"translate-x-1/2 left-0"}
                        bg-custom-gold/50 text-white rounded-full hover:bg-custom-gold/90 
                        transition-all disabled:opacity-50 disabled:cursor-not-allowed z-20
                        w-12 h-12 flex items-center justify-center cursor-pointer`,children:l.jsx("span",{className:"text-2xl leading-none pb-1",children:"‹"})}),l.jsx("div",{className:"flex justify-center mt-4 space-x-1 sm:space-x-3 mb-1",children:n.map((t,o)=>l.jsx("button",{onClick:()=>d(o,o>s?"left":"right"),disabled:r,className:`cursor-pointer relative transition-all duration-300 w-2 h-2 sm:w-3.5 sm:h-3.5 rounded-full 
                            ${o===s?"scale-125 bg-custom-gold":"bg-gray-300 hover:bg-gray-400"} ${r?"opacity-50":"opacity-100"}`},o))})]})};export{q as default};
