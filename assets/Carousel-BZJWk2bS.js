import{r as e,i as P,j as r}from"./index-DHm7yTNn.js";const q=({images:n,autoPlay:T=!1,interval:v=3e3})=>{const[s,j]=e.useState(0),[y,h]=e.useState(!0),[g,k]=e.useState(null),[l,S]=e.useState(!1),C=e.useRef(new Set([0])),a=e.useRef(null),f=e.useRef(0),u=e.useRef(null),[i,E]=e.useState(null),[b,x]=e.useState(null),$=e.useRef(null),I=50,N=P.language;e.useEffect(()=>{f.current=s},[s]),e.useEffect(()=>()=>{a.current&&window.clearInterval(a.current),u.current&&window.clearTimeout(u.current)},[]);const R=e.useCallback(t=>{[t,(t+1)%n.length,(t-1+n.length)%n.length].forEach(c=>{if(!C.current.has(c)){const p=new Image;p.src=n[c].src,p.onload=()=>{C.current.add(c)},p.onerror=()=>{console.error(`Failed to preload image: ${n[c].src}`)}}})},[n]);e.useEffect(()=>{R(s)},[s,R]),e.useEffect(()=>{if(T)return a.current=window.setInterval(()=>{j(t=>(t+1)%n.length)},v),()=>{a.current&&(window.clearInterval(a.current),a.current=null)}},[T,v,n.length]);const d=e.useCallback((t,o)=>{t===f.current||l||(S(!0),k(o),j(t),h(!0),u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(()=>{S(!1),k(null)},500))},[l]),m=e.useCallback(()=>{const t=(f.current+1)%n.length;d(t,"left")},[d,n.length]),w=e.useCallback(()=>{const t=(f.current-1+n.length)%n.length;d(t,"right")},[d,n.length]),L=e.useCallback(()=>{h(!1)},[]),_=e.useCallback(()=>{console.error("Failed to load current image"),h(!1)},[]),z=e.useCallback(()=>g?g==="left"?"slide-in-left":"slide-in-right":"",[g]),D=e.useCallback(t=>{l||(x(null),E(t.targetTouches[0].clientX))},[l]),F=e.useCallback(t=>{i&&x(t.targetTouches[0].clientX)},[i]),M=e.useCallback(()=>{if(!i||!b||l)return;const t=i-b,o=t>I,c=t<-I;o?m():c&&w(),E(null),x(null)},[i,b,l,m,w]);return r.jsxs("div",{className:`carousel relative w-full mx-auto overflow-hidden rounded-lg \r
                shadow-[0px_-15px_15px_5px_rgba(0,0,0,0.05)] dark:shadow-gray-600/50`,ref:$,onTouchStart:D,onTouchMove:F,onTouchEnd:M,children:[y&&r.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center z-10",children:r.jsx("div",{className:"loader"})}),r.jsx("div",{className:`relative w-full h-110 ${z()}`,children:r.jsx("img",{src:n[s].src,alt:n[s].alt,className:`w-full h-full object-cover transition-all duration-500 ${y?"opacity-0":"opacity-100"}`,onLoad:L,onError:_,loading:"lazy",decoding:"async"},s)}),r.jsx("button",{onClick:m,disabled:l,className:`hidden sm:block absolute top-1/2 transform -translate-y-1/2 
                        ${N==="fa"?"translate-x-1/2 left-0":"-translate-x-1/2 right-0"}
                        bg-custom-gold/50 text-white rounded-full hover:bg-custom-gold/90 
                        transition-all disabled:opacity-50 disabled:cursor-not-allowed z-20
                        w-12 h-12 flex items-center justify-center cursor-pointer`,children:r.jsx("span",{className:"text-2xl leading-none pb-1",children:"›"})}),r.jsx("button",{onClick:w,disabled:l,className:`hidden sm:block absolute top-1/2 transform -translate-y-1/2
                        ${N==="fa"?"-translate-x-1/2 right-0":"translate-x-1/2 left-0"}
                        bg-custom-gold/50 text-white rounded-full hover:bg-custom-gold/90 
                        transition-all disabled:opacity-50 disabled:cursor-not-allowed z-20
                        w-12 h-12 flex items-center justify-center cursor-pointer`,children:r.jsx("span",{className:"text-2xl leading-none pb-1",children:"‹"})}),r.jsx("div",{className:"flex justify-center mt-4 space-x-1 sm:space-x-3 mb-1",children:n.map((t,o)=>r.jsx("button",{onClick:()=>d(o,o>s?"left":"right"),disabled:l,className:`cursor-pointer relative transition-all duration-300 w-2 h-2 sm:w-3.5 sm:h-3.5 rounded-full 
                            ${o===s?"scale-125 bg-custom-gold":"bg-gray-300 hover:bg-gray-400"} ${l?"opacity-50":"opacity-100"}`},o))})]})};export{q as default};
